knitr::opts_chunk$set(echo = TRUE)
library(ggplot2, quietly = T)
library(dplyr, quietly = T)
library(data.table, quietly = T)
system.time(soil.data <- fread("haryana_soil_nutrient.csv", header = T, stringsAsFactors = T))
system.time(soil.data <- fread("haryana_soil_nutrient.csv", header = T, stringsAsFactors = T))
apply(soil.data, 2, sum(isnull), na.rm=T)
apply(soil.data, 2, sum(is.na), na.rm=T)
sum(is.na(soil.data$SoilPh))
apply(soil.data, 2, sum, is.na, na.rm=T)
apply(soil.data[,5:18], 2, sum, is.na, na.rm=T)
apply(soil.data[,4:18], 2, sum, is.na, na.rm=T)
apply(soil.data[,7:18], 2, sum, is.na, na.rm=T)
sapply(soil.data[,7:18], sum, is.na, na.rm=T)
sapply(soil.data[,7:18], sum, is.na)
sapply(soil.data[,7:18], is.na)
sapply(soil.data[,7:18], is.na, sum)
sapply(soil.data[,7:18], sum, is.na)
sapply(soil.data, sum, is.na)
sapply(soil.data[,8:15], sum, is.na)
str(soil.data)
sapply(soil.data[,8:18], sum, is.na)
sapply(soil.data[,8], sum, is.na)
sapply(soil.data[,8], sum, is.na)
sapply(soil.data[,9], sum, is.na)
sapply(soil.data$Potassium, sum, is.na)
sapply(soil.data$Potassium, sum, is.na())
sapply(soil.data$Potassium, sum(is.na))
sapply(soil.data, function(x){sum(is.na(x))})
table(soil.data$DistrictId)
table(soil.data[is.na(soil.data$DistrictId),2])
table(soil.data[is.na(soil.data$DistrictId)])
table(soil.data[is.na(soil.data$DistrictId),])
table(soil.data[is.na(soil.data$DistrictId)==TRUE,])
table(soil.data[is.na(soil.data$DistrictId)==TRUE,2])
sum(is.na(soil.data$DistrictId))
tmp1 <-subset(soil.data, is.na(soil.data$DistrictId)==TRUE)
head(temp1)
head(tmp1)
table(tmp1$BlockId)
unqiue(soil.data$BlockId)
unique(soil.data$BlockId)
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2, quietly = T)
library(dplyr, quietly = T)
library(data.table, quietly = T)
system.time(soil.data <- fread("haryana_soil_nutrient.csv", header = T, stringsAsFactors = T))
str(soil.data)
sapply(soil.data, function(x){sum(is.na(x))})
rows_tot <- nrow(soil.data)
sapply(soil.data, function(x){sum(is.na(x))/nrows_tot})
sapply(soil.data, function(x){sum(is.na(x))/rows_tot})
sapply(soil.data, function(x){round(100*sum(is.na(x))/rows_tot, digits = 2)})
summary(soil.data)
nitrogen.data <- subset(soil.data, is.na(soil.data$Nitrogen)==FALSE)
str(nitrogen.data)
table(nitrogen.data$BlockName)
order(table(nitrogen.data$BlockName))
table(nitrogen.data$DistrictId)
table(nitrogen.data$DistrictName)
plot(table(nitrogen.data$DistrictName))
ggplot(table(nitrogen.data$DistrictName)) + geom_bar(stat = "identity")
qplot(table(nitrogen.data$DistrictName))
a<-table(nitrogen.data$DistrictName)
a
str(a)
unlist(a)
str(unlist(a))
b<-unlist(a)
b[1]
b[2]
b[2][1]
b[2][2]
b[2][1][1]
b[2][1][2]
b[2][1][1]
a<-aggregate(nitrogen.data$Nitrogen, nitrogen.data$DistrictName, "count")
a<-aggregate(nitrogen.data$Nitrogen, nitrogen.data$DistrictName, by="count")
a<-aggregate(nitrogen.data, nitrogen.data$DistrictName, by="count")
?aggregate
a<-aggregate(nitrogen.data, by=nitrogen.data$DistrictName, FUN="count")
a<-aggregate(nitrogen.data$Nitrogen, by=nitrogen.data$DistrictName, FUN="count")
a<-aggregate(nitrogen.data$Nitrogen, by=c(nitrogen.data$DistrictName), FUN="count")
a<-aggregate(nitrogen.data$Nitrogen, by="nitrogen.data$DistrictName", FUN="count")
a<-aggregate(nitrogen.data$Nitrogen, by=nitrogen.data$DistrictName, FUN="count")
a<-aggregate(nitrogen.data$Nitrogen ~ nitrogen.data$DistrictName, FUN="count")
a<-aggregate(nitrogen.data$Nitrogen ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=count)
a<-aggregate(nitrogen.data$Nitrogen ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=sum)
a
a<-aggregate(nitrogen.data$Nitrogen ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=mean)
a
a<-aggregate(nitrogen.data$Nitrogen ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=identity)
a
a<-aggregate(nitrogen.data$Nitrogen ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=count)
nitrogen.data$Identity<-1
a<-aggregate(nitrogen.data$Identity ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=sum)
a
order_by(a$`nitrogen.data$Identity`)
order(a[a$`nitrogen.data$Identity`])
order(a[,a$`nitrogen.data$Identity`])
plot(a)
qplot(a$`nitrogen.data$DistrictName`, a$`nitrogen.data$Identity`, data=a)
qplot(a$`nitrogen.data$DistrictName`, a$`nitrogen.data$Identity`, data=a, col=a$`nitrogen.data$DistrictName`)
qplot(a$`nitrogen.data$DistrictName`, a$`nitrogen.data$Identity`, data=a)
qplot(a$`nitrogen.data$DistrictName`, a$`nitrogen.data$Identity`, data=a) + theme(axis.text.x = element_text(angle = 90, hjust = 1))
qplot(a$`nitrogen.data$DistrictName`, a$`nitrogen.data$Identity`, data=a) + theme(axis.text.x = element_text(angle = 60, hjust = 1))
?order
?order_by
?arrange
a[with(a, order(a$`nitrogen.data$Identity`))]
a[with(a, order(a[1]))]
a[with(a, order(a[,1]))]
a[with(a, order("nitrogen.data$Identity"))]
nitrogen.data <- subset(soil.data, is.na(soil.data$Nitrogen)==FALSE)
nitrogen.data$Identity<-1
agg.district <-aggregate(nitrogen.data$Identity ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=sum)
agg.block <-aggregate(nitrogen.data$Identity ~ nitrogen.data$BlockName,data=nitrogen.data, FUN=sum)
agg.block
arrange(agg.block, `nitrogen.data$Identity`)
arrange(agg.block, desc(`nitrogen.data$Identity`))
nitrogen.missing <- is.na(soil.data$Nitrogen)
table(nitrogen.missing)
table(soil.data$BlockId, nitrogen.missing)
table(soil.data$BlockId, nitrogen.missing)
prop.table(soil.data$BlockId, nitrogen.missing)
prop.table(soil.data$BlockId~nitrogen.missing)
?prop.table
prop.table(soil.data$BlockId~nitrogen.missing,2)
prop.table(soil.data$BlockId~nitrogen.missing,margin=2)
prop.table(soil.data$BlockId,nitrogen.missing,margin=2)
prop.table(soil.data$BlockId~nitrogen.missing,margin=2)
table(soil.data$BlockId, nitrogen.missing)
table(soil.data$BlockName + soil.data$DistrictName, nitrogen.missing)
table(paste0(soil.data$BlockName,soil.data$DistrictName), nitrogen.missing)
table(paste0(soil.data$DistrictName, " - ",soil.data$BlockName), nitrogen.missing)
plot(table(paste0(soil.data$DistrictName, " - ",soil.data$BlockName), nitrogen.missing))
nitrogen.data <- subset(soil.data, is.na(soil.data$Nitrogen)==FALSE)
nitrogen.data$Identity<-1
agg.district <-aggregate(nitrogen.data$Identity ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=sum)qplot(a$`nitrogen.data$DistrictName`, agg.district$`nitrogen.data$Identity`, data=a) + theme(axis.text.x = element_text(angle = 60, hjust = 1))
nitrogen.data$Identity<-1
agg.district <-aggregate(nitrogen.data$Identity ~ nitrogen.data$DistrictName,data=nitrogen.data, FUN=sum)
qplot(a$`nitrogen.data$DistrictName`, agg.district$`nitrogen.data$Identity`, data=a) + theme(axis.text.x = element_text(angle = 60, hjust = 1))
str(soil.data)
ggplot(soil.data) + aes(x = DistrictName, y=ElecticalConductivity) + geom_bar(stat = "identity") + stat_summary(geom = "mean")
ggplot(soil.data) + aes(x = DistrictName, y=ElecticalConductivity) + geom_bar(stat = "identity")
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity) + geom_bar(stat = "identity")
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity) + geom_bar(stat = "mean")
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity) + geom_bar(stat = mean)
?geom_bar
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity) + geom_bar(stat = "summary", fun.y="mean")
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity) + geom_bar(stat = "summary", fun.y="mean")+ theme(axis.text.x = element_text(angle = 60, hjust = 1))
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity, col=ElectricalConductivity) + geom_bar(stat = "summary", fun.y="mean")+ theme(axis.text.x = element_text(angle = 60, hjust = 1)) + xlab("District") + ylab("Electrical Conductivity")
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity, col=ElectricalConductivity) + geom_bar(stat = "summary", fun.y="mean")+ theme(axis.text.x = element_text(angle = 60, hjust = 1)) + xlab("District") + ylab("Electrical Conductivity")
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity, color=ElectricalConductivity) + geom_bar(stat = "summary", fun.y="mean")+ theme(axis.text.x = element_text(angle = 60, hjust = 1)) + xlab("District") + ylab("Electrical Conductivity")
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity, color=DistrictName) + geom_bar(stat = "summary", fun.y="mean")+ theme(axis.text.x = element_text(angle = 60, hjust = 1)) + xlab("District") + ylab("Electrical Conductivity")
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity, fill=ElectricalConductivity) + geom_bar(stat = "summary", fun.y="mean")+ theme(axis.text.x = element_text(angle = 60, hjust = 1)) + xlab("District") + ylab("Electrical Conductivity")
DistrictName
ggplot(soil.data) + aes(x = DistrictName, y=ElectricalConductivity, fill=DistrictName) + geom_bar(stat = "summary", fun.y="mean")+ theme(axis.text.x = element_text(angle = 60, hjust = 1)) + xlab("District") + ylab("Electrical Conductivity")
qplot(agg.district$`nitrogen.data$DistrictName`, agg.district$`nitrogen.data$Identity`, data=agg.district, xlab = "Ditrict", ylab="Num of Entries with Nitrogen Data", fill=`nitrogen.data$DistrictName`) + theme(axis.text.x = element_text(angle = 60, hjust = 1))
qplot(agg.district$`nitrogen.data$DistrictName`, agg.district$`nitrogen.data$Identity`, data=agg.district, xlab = "Ditrict", ylab="Num of Entries with Nitrogen Data", col=`nitrogen.data$DistrictName`) + theme(axis.text.x = element_text(angle = 60, hjust = 1))
